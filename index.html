<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>ThÃ©o Metayer - Carte AR Interactive</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/3.4.5/aframe/build/aframe-ar.js"></script>
    
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Arial', sans-serif; }
        
        #overlay {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(61, 90, 64, 0.95);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <div id="overlay" class="pulse">ðŸŽ¯ Scanne le marqueur Hiro pour voir la magie âœ¨</div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" vr-mode-ui="enabled: false">
        <!-- Assets -->
        <a-assets>
            <img id="cardImg" src="capture.jpg" crossorigin="anonymous">
        </a-assets>
        
        <!-- Marker Hiro -->
        <a-marker preset="hiro" emitevents="true" id="marker">
            
            <!-- ========== CARTE DE VISITE CENTRALE ========== -->
            <a-plane 
                id="cardPlane"
                src="#cardImg"
                position="0 0 0" 
                rotation="-90 0 0" 
                width="2" 
                height="1.25"
                material="shader: flat; side: double">
            </a-plane>
            
            <!-- ========== BOUTON PORTFOLIO (Gauche) ========== -->
            <a-entity id="portfolioBtn" position="-1.5 0 0.3" rotation="-90 0 0">
                <!-- Fond cercle -->
                <a-circle 
                    radius="0.3" 
                    color="#3D5A64"
                    class="clickable"
                    data-url="https://theo-metayer-portfolio.com">
                </a-circle>
                <!-- IcÃ´ne portfolio -->
                <a-text 
                    value="ðŸ’¼" 
                    align="center" 
                    width="1.5"
                    position="0 0 0.01"
                    color="#FFFFFF">
                </a-text>
                <!-- Label -->
                <a-text 
                    value="Portfolio" 
                    align="center" 
                    width="0.8"
                    position="0 -0.4 0.01"
                    color="#FFFFFF">
                </a-text>
            </a-entity>
            
            <!-- ========== BOUTON INSTAGRAM (Droite) ========== -->
            <a-entity id="instaBtn" position="1.5 0 0.3" rotation="-90 0 0">
                <a-circle 
                    radius="0.3" 
                    color="#E1306C"
                    class="clickable"
                    data-url="https://instagram.com/theo.metayer">
                </a-circle>
                <a-text 
                    value="ðŸ“·" 
                    align="center" 
                    width="1.5"
                    position="0 0 0.01"
                    color="#FFFFFF">
                </a-text>
                <a-text 
                    value="Instagram" 
                    align="center" 
                    width="0.7"
                    position="0 -0.4 0.01"
                    color="#FFFFFF">
                </a-text>
            </a-entity>
            
            <!-- ========== BOUTON LINKEDIN (Haut) ========== -->
            <a-entity id="linkedinBtn" position="0 0.8 0.3" rotation="-90 0 0">
                <a-circle 
                    radius="0.3" 
                    color="#0077B5"
                    class="clickable"
                    data-url="https://linkedin.com/in/theo-metayer">
                </a-circle>
                <a-text 
                    value="ðŸ’¼" 
                    align="center" 
                    width="1.5"
                    position="0 0 0.01"
                    color="#FFFFFF">
                </a-text>
                <a-text 
                    value="LinkedIn" 
                    align="center" 
                    width="0.7"
                    position="0 -0.4 0.01"
                    color="#FFFFFF">
                </a-text>
            </a-entity>
            
            <!-- ========== BOUTON GITHUB (Bas) ========== -->
            <a-entity id="githubBtn" position="0 -0.8 0.3" rotation="-90 0 0">
                <a-circle 
                    radius="0.3" 
                    color="#24292E"
                    class="clickable"
                    data-url="https://github.com/theo-049">
                </a-circle>
                <a-text 
                    value="ðŸ’»" 
                    align="center" 
                    width="1.5"
                    position="0 0 0.01"
                    color="#FFFFFF">
                </a-text>
                <a-text 
                    value="GitHub" 
                    align="center" 
                    width="0.7"
                    position="0 -0.4 0.01"
                    color="#FFFFFF">
                </a-text>
            </a-entity>
            
            <!-- ========== Ã‰LÃ‰MENTS DÃ‰CORATIFS 3D ========== -->
            
            <!-- Cube rotatif coin supÃ©rieur gauche -->
            <a-box 
                id="cube1"
                position="-1.2 1.2 0.4" 
                rotation="45 45 45"
                width="0.15" 
                height="0.15" 
                depth="0.15"
                color="#3D5A64"
                metalness="0.8"
                roughness="0.2">
            </a-box>
            
            <!-- Cube rotatif coin supÃ©rieur droit -->
            <a-box 
                id="cube2"
                position="1.2 1.2 0.4" 
                rotation="30 60 15"
                width="0.15" 
                height="0.15" 
                depth="0.15"
                color="#608070"
                metalness="0.8"
                roughness="0.2">
            </a-box>
            
            <!-- SphÃ¨re flottante au-dessus -->
            <a-sphere 
                id="sphere"
                position="0 0 1.2" 
                radius="0.12"
                color="#FFFFFF"
                opacity="0.9"
                metalness="0.9"
                roughness="0.1">
            </a-sphere>
            
            <!-- Anneau torus tournant -->
            <a-torus 
                id="torus"
                position="0 0 0.8" 
                radius="0.5" 
                radius-tubular="0.03"
                color="#3D5A64"
                opacity="0.7"
                rotation="90 0 0">
            </a-torus>
            
            <!-- Particules Ã©toiles autour -->
            <a-entity id="particles">
                <a-sphere position="0.8 0.8 0.5" radius="0.02" color="#FFEB3B"></a-sphere>
                <a-sphere position="-0.8 0.8 0.5" radius="0.02" color="#FFEB3B"></a-sphere>
                <a-sphere position="0.8 -0.8 0.5" radius="0.02" color="#FFEB3B"></a-sphere>
                <a-sphere position="-0.8 -0.8 0.5" radius="0.02" color="#FFEB3B"></a-sphere>
            </a-entity>
            
            <!-- Texte 3D au-dessus de la carte -->
            <a-text 
                id="floatingText"
                value="ThÃ©o Metayer\nÃ‰tudiant IUT Corse" 
                align="center" 
                width="2.5"
                position="0 0 1"
                rotation="-90 0 0"
                color="#3D5A64"
                font="roboto">
            </a-text>
            
            <!-- LumiÃ¨re point qui pulse -->
            <a-light 
                type="point" 
                intensity="1.5" 
                color="#FFFFFF"
                position="0 0 1.5">
            </a-light>
            
        </a-marker>
        
        <!-- Camera -->
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        let animationStarted = false;
        
        document.addEventListener('DOMContentLoaded', function() {
            const marker = document.getElementById("marker");
            const overlay = document.getElementById("overlay");
            
            // Ã‰lÃ©ments Ã  animer
            const cardPlane = document.getElementById("cardPlane");
            const portfolioBtn = document.getElementById("portfolioBtn");
            const instaBtn = document.getElementById("instaBtn");
            const linkedinBtn = document.getElementById("linkedinBtn");
            const githubBtn = document.getElementById("githubBtn");
            const cube1 = document.getElementById("cube1");
            const cube2 = document.getElementById("cube2");
            const sphere = document.getElementById("sphere");
            const torus = document.getElementById("torus");
            const floatingText = document.getElementById("floatingText");

            // ========== DÃ‰TECTION MARQUEUR ========== //
            marker.addEventListener("markerFound", () => {
                console.log('âœ“ Marqueur trouvÃ©!');
                overlay.textContent = 'ðŸŽ‰ Marqueur dÃ©tectÃ© ! Explore les boutons ðŸ‘†';
                overlay.style.background = 'rgba(76, 175, 80, 0.95)';
                
                if (!animationStarted) {
                    animationStarted = true;
                    
                    // Animation carte
                    cardPlane.setAttribute('animation', {
                        property: 'scale',
                        from: '0.1 0.1 0.1',
                        to: '1 1 1',
                        dur: 800,
                        easing: 'easeOutBack'
                    });
                    
                    // Animation boutons (effet cascade)
                    setTimeout(() => {
                        portfolioBtn.setAttribute('animation', {
                            property: 'position',
                            from: '-1.5 0 -0.5',
                            to: '-1.5 0 0.3',
                            dur: 600,
                            easing: 'easeOutElastic'
                        });
                    }, 300);
                    
                    setTimeout(() => {
                        instaBtn.setAttribute('animation', {
                            property: 'position',
                            from: '1.5 0 -0.5',
                            to: '1.5 0 0.3',
                            dur: 600,
                            easing: 'easeOutElastic'
                        });
                    }, 450);
                    
                    setTimeout(() => {
                        linkedinBtn.setAttribute('animation', {
                            property: 'position',
                            from: '0 0.8 -0.5',
                            to: '0 0.8 0.3',
                            dur: 600,
                            easing: 'easeOutElastic'
                        });
                    }, 600);
                    
                    setTimeout(() => {
                        githubBtn.setAttribute('animation', {
                            property: 'position',
                            from: '0 -0.8 -0.5',
                            to: '0 -0.8 0.3',
                            dur: 600,
                            easing: 'easeOutElastic'
                        });
                    }, 750);
                    
                    // Animation texte
                    floatingText.setAttribute('animation', {
                        property: 'position',
                        from: '0 0 2',
                        to: '0 0 1',
                        dur: 1000,
                        easing: 'easeOutQuad'
                    });
                }
                
                // Animations continues
                startContinuousAnimations();
            });

            marker.addEventListener("markerLost", () => {
                console.log('âœ— Marqueur perdu');
                overlay.textContent = 'ðŸŽ¯ Scanne le marqueur Hiro pour voir la magie âœ¨';
                overlay.style.background = 'rgba(61, 90, 64, 0.95)';
            });
            
            // ========== ANIMATIONS CONTINUES ========== //
            function startContinuousAnimations() {
                // Rotation cubes
                cube1.setAttribute('animation', {
                    property: 'rotation',
                    to: '405 405 405',
                    dur: 8000,
                    loop: true,
                    easing: 'linear'
                });
                
                cube2.setAttribute('animation', {
                    property: 'rotation',
                    to: '-390 420 375',
                    dur: 10000,
                    loop: true,
                    easing: 'linear'
                });
                
                // SphÃ¨re flottante
                sphere.setAttribute('animation__float', {
                    property: 'position',
                    from: '0 0 1.2',
                    to: '0 0 1.4',
                    dur: 2000,
                    loop: true,
                    dir: 'alternate',
                    easing: 'easeInOutSine'
                });
                
                sphere.setAttribute('animation__pulse', {
                    property: 'scale',
                    from: '1 1 1',
                    to: '1.3 1.3 1.3',
                    dur: 1500,
                    loop: true,
                    dir: 'alternate',
                    easing: 'easeInOutQuad'
                });
                
                // Torus rotation
                torus.setAttribute('animation', {
                    property: 'rotation',
                    to: '90 360 0',
                    dur: 12000,
                    loop: true,
                    easing: 'linear'
                });
            }
            
            // ========== GESTION DES CLICS ========== //
            const scene = document.querySelector('a-scene');
            
            scene.addEventListener('click', function(evt) {
                const clickedEl = evt.target;
                
                if (clickedEl.classList.contains('clickable')) {
                    const url = clickedEl.getAttribute('data-url');
                    if (url) {
                        console.log('Redirection vers:', url);
                        window.open(url, '_blank');
                        
                        // Feedback visuel
                        clickedEl.setAttribute('animation__click', {
                            property: 'scale',
                            from: '1 1 1',
                            to: '1.2 1.2 1.2',
                            dur: 200,
                            dir: 'alternate',
                            easing: 'easeInOutQuad'
                        });
                    }
                }
            });
        });
    </script>
</body>
</html>
